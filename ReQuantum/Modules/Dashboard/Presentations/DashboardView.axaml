<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModels="clr-namespace:ReQuantum.ViewModels"
			 xmlns:controls="https://github.com/avaloniaui/lib/controls"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="ReQuantum.Views.DashboardView"
             x:DataType="viewModels:DashboardViewModel">
  <Design.DataContext>
    <!-- This only sets the DataContext for the previewer in an IDE,
         to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
    <viewModels:DashboardViewModel />
  </Design.DataContext>


  <StackPanel Spacing="16" Margin="16">
      <TextBlock Text="{Binding Welcome}"
                 FontSize="16"
                 Foreground="{DynamicResource PrimaryTextBrush}"
                 TextWrapping="Wrap"/>
      <Button Command="{Binding UpdateWelcomeCommand}"
              HorizontalAlignment="Left"
              Padding="16,8">
        <TextBlock Text="点我"
                   Foreground="{DynamicResource PrimaryTextBrush}"
                    FontSize="14"/>
      </Button>
	  
	  <!-- 分割线 -->
	  <Rectangle Height="1" Fill="{DynamicResource RegionBorderBrush}" Opacity="0.2" Margin="0,16,0,16"/>

	  <!-- 三模块横向排列区域 -->
	  <Grid ColumnDefinitions="*,*,*" ColumnSpacing="18">

		  <!-- 近期日程 -->
		  <Border Grid.Column="0"
				  Padding="12"
				  Background="{DynamicResource RegionBackgroundBrush}"
				  BorderThickness="1"
				  BorderBrush="{DynamicResource RegionBorderBrush}"
				  CornerRadius="8"
				  MinHeight="120">
			  <StackPanel Spacing="8">
				  <TextBlock Text="{Binding Localizer[Upcomingschedule]}" FontSize="18" FontWeight="SemiBold"/>

				  <ItemsControl ItemsSource="{Binding RecentEvents}">
					  <ItemsControl.ItemTemplate>
						  <DataTemplate>
							  <StackPanel Spacing="2">
								  <TextBlock Text="{Binding Content}" FontWeight="Medium" FontSize="15"/>
								  <TextBlock Text="{Binding StartTime, StringFormat='{}{0:g}'}"
											 FontSize="13" Foreground="#555"/>
							  </StackPanel>
						  </DataTemplate>
					  </ItemsControl.ItemTemplate>
				  </ItemsControl>

				  <TextBlock Text="{Binding Localizer[NoEvents]}"
							 FontStyle="Italic"
							 FontSize="16"
							 Foreground="#888"
							 IsVisible="{Binding !RecentEvents.Count}"/>
			  </StackPanel>
		  </Border>

		  <!-- 近期待办 -->
		  <Border Grid.Column="1"
				  Padding="12"
				  Background="{DynamicResource RegionBackgroundBrush}"
				  BorderThickness="1"
				  BorderBrush="{DynamicResource RegionBorderBrush}"
				  CornerRadius="8"
				  MinHeight="120">
			  <StackPanel Spacing="8">
				  <TextBlock Text="{Binding Localizer[Todos]}" FontSize="18" FontWeight="SemiBold"/>

				  <ItemsControl ItemsSource="{Binding RecentTodos}">
					  <ItemsControl.ItemTemplate>
						  <DataTemplate>
							  <StackPanel Spacing="2">
								  <TextBlock Text="{Binding Content}" FontWeight="Medium" FontSize="15"/>
								  <TextBlock Text="{Binding DueTime, StringFormat='{} {0:d}'}"
											 FontSize="13" Foreground="#555"/>
							  </StackPanel>
						  </DataTemplate>
					  </ItemsControl.ItemTemplate>
				  </ItemsControl>

				  <TextBlock Text="{Binding Localizer[NoTodos]}"
							 FontStyle="Italic"
							 FontSize="16"
							 Foreground="#888"
							 IsVisible="{Binding !RecentTodos.Count}"/>
			  </StackPanel>
		  </Border>

		  <!-- 最近便签 -->
		  <Border Grid.Column="2"
				  Padding="12"
				  Background="{DynamicResource RegionBackgroundBrush}"
				  BorderThickness="1"
				  BorderBrush="{DynamicResource RegionBorderBrush}"
				  CornerRadius="8"
				  MinHeight="120">
			  <StackPanel Spacing="8">
				  <TextBlock Text="{Binding Localizer[RecentNotes]}" FontSize="18" FontWeight="SemiBold"/>

				  <ItemsControl ItemsSource="{Binding RecentNotes}">
					  <ItemsControl.ItemTemplate>
						  <DataTemplate>
							  <TextBlock Text="{Binding Content}"
										 TextWrapping="Wrap"
										 FontSize="15"
										 MaxLines="3"
										 TextTrimming="CharacterEllipsis"/>
						  </DataTemplate>
					  </ItemsControl.ItemTemplate>
				  </ItemsControl>

				  <TextBlock Text="{Binding Localizer[NoNotes]}"
							 FontStyle="Italic"
							 FontSize="16"
							 Foreground="#888"
							 IsVisible="{Binding !RecentNotes.Count}"/>
			  </StackPanel>
		  </Border>
	  </Grid>

	  <!-- 刷新时间 -->
	  <TextBlock Text="{Binding LastUpdateTimeString}" FontSize="12" Foreground="#888" Margin="0,4,0,0"/>

  </StackPanel>
</UserControl>
