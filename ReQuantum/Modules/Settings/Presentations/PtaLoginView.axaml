<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModels="clr-namespace:ReQuantum.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="ReQuantum.Views.PtaLoginView"
             x:DataType="viewModels:PtaLoginViewModel">
  <Design.DataContext>
    <viewModels:PtaLoginViewModel />
  </Design.DataContext>

  <StackPanel Spacing="16">

    <!-- Login Section (visible when not logged in) -->
    <StackPanel Spacing="16" IsVisible="{Binding !IsLoggedIn}">
      <Border BorderThickness="1"
              BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
              CornerRadius="8"
              Padding="32"
              HorizontalAlignment="Center"
              MinWidth="400">
        <StackPanel Spacing="20">
          <TextBlock Text="{Binding Localizer[PtaAccountLogin]}"
                     FontSize="18"
                     FontWeight="SemiBold"
                     HorizontalAlignment="Center"/>

          <!-- Status Message -->
          <TextBlock Text="{Binding StatusMessage.Text}"
                     FontSize="13"
                     TextWrapping="Wrap"
                     HorizontalAlignment="Center"
                     TextAlignment="Center"
                     MinHeight="40"
                     IsVisible="{Binding StatusMessage.Text, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>

          <!-- Login Button -->
          <Button Command="{Binding LoginCommand}"
                  HorizontalAlignment="Stretch"
                  Padding="20,14"
                  IsEnabled="{Binding !IsLoading}">
            <StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Center">
              <TextBlock Text="ðŸŒ" FontSize="18" IsVisible="{Binding !IsLoading}"/>
              <TextBlock Text="{Binding Localizer[PtaClickToLogin]}"
                         FontSize="15"
                         FontWeight="SemiBold"
                         IsVisible="{Binding !IsLoading}"/>
              <TextBlock Text="{Binding Localizer[LoggingIn]}"
                         FontSize="15"
                         FontWeight="SemiBold"
                         IsVisible="{Binding IsLoading}"/>
            </StackPanel>
          </Button>

          <!-- Help Text -->
          <TextBlock Text="{Binding Localizer[PtaLoginHelpText]}"
                     FontSize="12"
                     Opacity="0.6"
                     TextWrapping="Wrap"
                     TextAlignment="Center"
                     HorizontalAlignment="Center"/>
        </StackPanel>
      </Border>
    </StackPanel>

    <!-- Logged In Status (visible when logged in) -->
    <StackPanel Spacing="16" IsVisible="{Binding IsLoggedIn}">
      <Border BorderThickness="1"
              BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
              CornerRadius="8"
              Padding="32"
              HorizontalAlignment="Center"
              MinWidth="400">
        <StackPanel Spacing="16">
          <TextBlock FontSize="18"
                     FontWeight="Bold"
                     Foreground="Green"
                     HorizontalAlignment="Center">
            <Run Text="âœ“ "/>
            <Run Text="{Binding Localizer[PtaLoggedIn]}"/>
          </TextBlock>

          <TextBlock Text="{Binding StatusMessage.Text}"
                     FontSize="14"
                     Opacity="0.8"
                     HorizontalAlignment="Center"
                     TextAlignment="Center"
                     TextWrapping="Wrap"
                     IsVisible="{Binding StatusMessage.Text, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
        </StackPanel>
      </Border>

      <!-- Logout Button -->
      <Button Command="{Binding LogoutCommand}"
              HorizontalAlignment="Center"
              Padding="32,12">
        <TextBlock Text="{Binding Localizer[Logout]}"
                   FontSize="14"
                   FontWeight="SemiBold"/>
      </Button>
    </StackPanel>

  </StackPanel>
</UserControl>
